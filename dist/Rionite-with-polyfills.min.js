!function(e,t,n,r){"use strict";function i(){var e=L.splice(0,L.length);for(Ge=0;e.length;)e.shift().call(null,e.shift())}function o(e,t){for(var n=0,r=e.length;n<r;n++)g(e[n],t)}function l(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],O(t,ne[s(t)])}function a(e){return function(t){je(t)&&(g(t,e),o(t.querySelectorAll(re),e))}}function s(e){var t=ke.call(e,"is"),n=e.nodeName.toUpperCase(),r=oe.call(te,t?Q+t.toUpperCase():K+n);return t&&-1<r&&!u(n,t)?-1:r}function u(e,t){return-1<re.indexOf(e+'[is="'+t+'"]')}function c(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,i=e.target;!We||i&&i!==t||!t[P]||"style"===r||e.prevValue===e.newValue||t[P](r,n===e[G]?null:e.prevValue,n===e[J]?null:e.newValue)}function f(e){var t=a(e);return function(e){L.push(t,e.target),Ge&&clearTimeout(Ge),Ge=setTimeout(i,1)}}function d(e){Ze&&(Ze=!1,e.currentTarget.removeEventListener(W,d)),o((e.target||t).querySelectorAll(re),e.detail===k?k:D),Se&&h()}function m(e,t){var n=this;Be.call(n,e,t),C.call(n,{target:n})}function p(e,t){xe(e,t),x?x.observe(e,qe):(Je&&(e.setAttribute=m,e[I]=A(e),e[j](X,C)),e[j](Z,c)),e[q]&&We&&(e.created=!0,e[q](),e.created=!1)}function h(){for(var e,t=0,n=De.length;t<n;t++)e=De[t],ie.contains(e)||(n--,De.splice(t--,1),g(e,k))}function v(e){throw new Error("A "+e+" type is already registered")}function g(e,t){var n,r=s(e);-1<r&&(N(e,ne[r]),r=0,t!==D||e[D]?t!==k||e[k]||(e[D]=!1,e[k]=!0,r=1):(e[k]=!1,e[D]=!0,r=1,Se&&oe.call(De,e)<0&&De.push(e)),r&&(n=e[t+F])&&n.call(e))}function b(){}function E(e,n,i){var o=i&&i[R]||"",l=n.prototype,a=Ae(l),s=n.observedAttributes||ce,u={prototype:a};Ie(a,q,{value:function(){if(Me)Me=!1;else if(!this[ge]){this[ge]=!0,new n(this),l[q]&&l[q].call(this);var e=_e[Ce.get(n)];(!Ee||e.create.length>1)&&w(this)}}}),Ie(a,P,{value:function(e){-1<oe.call(s,e)&&l[P].apply(this,arguments)}}),l[U]&&Ie(a,B,{value:l[U]}),l[V]&&Ie(a,$,{value:l[V]}),o&&(u[R]=o),t[r](e,u),e=e.toUpperCase(),_e[e]={constructor:n,create:o?[o,He(e)]:[e]},Ce.set(n,e),M(e),Le[e].r()}function T(e){var t=_e[e.toUpperCase()];return t&&t.constructor}function y(e){return"string"==typeof e?e:e&&e.is||""}function w(e){for(var t,n=e[P],r=n?e.attributes:ce,i=r.length;i--;)t=r[i],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function M(e){return e=e.toUpperCase(),e in Le||(Le[e]={},Le[e].p=new we(function(t){Le[e].r=t})),Le[e].p}function _(){be&&delete e.customElements,ue(e,"customElements",{configurable:!0,value:new b}),ue(e,"CustomElementRegistry",{configurable:!0,value:b});for(var n=function(n){var r=e[n];if(r){e[n]=function(e){var n,i;return e||(e=this),e[ge]||(Me=!0,n=_e[Ce.get(e.constructor)],i=Ee&&1===n.create.length,e=i?Reflect.construct(r,ce,n.constructor):t.createElement.apply(t,n.create),e[ge]=!0,Me=!1,i||w(e)),e},e[n].prototype=r.prototype;try{r.prototype.constructor=e[n]}catch(t){ve=!0,ue(r,ge,{value:e[n]})}}},r=S.get(/^HTML/),i=r.length;i--;n(r[i]));t.createElement=function(e,t){var n=y(t);return n?Ve.call(this,e,He(n)):Ve.call(this,e)}}var L,C,H,A,x,N,O,S=function(e){var t,r,i,o,l=/^[A-Z]+[a-z]/,a=function(e){var t,n=[];for(t in u)e.test(t)&&n.push(t);return n},s=function(e,t){t=t.toLowerCase(),t in u||(u[e]=(u[e]||[]).concat(t),u[t]=u[t.toUpperCase()]=e)},u=(n.create||n)(null),c={};for(r in e)for(o in e[r])for(i=e[r][o],u[o]=i,t=0;t<i.length;t++)u[i[t].toLowerCase()]=u[i[t].toUpperCase()]=o;return c.get=function(e){return"string"==typeof e?u[e]||(l.test(e)?[]:""):a(e)},c.set=function(e,t){return l.test(e)?s(e,t):s(t,e),c},c}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}}),I="__"+r+(1e5*Math.random()>>0),j="addEventListener",D="attached",F="Callback",k="detached",R="extends",P="attributeChanged"+F,B=D+F,U="connected"+F,V="disconnected"+F,q="created"+F,$=k+F,G="ADDITION",z="MODIFICATION",J="REMOVAL",Z="DOMAttrModified",W="DOMContentLoaded",X="DOMSubtreeModified",K="<",Q="=",Y=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,ee=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],te=[],ne=[],re="",ie=t.documentElement,oe=te.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},le=n.prototype,ae=le.hasOwnProperty,se=le.isPrototypeOf,ue=n.defineProperty,ce=[],fe=n.getOwnPropertyDescriptor,de=n.getOwnPropertyNames,me=n.getPrototypeOf,pe=n.setPrototypeOf,he=!!n.__proto__,ve=!1,ge="__dreCEv1",be=e.customElements,Ee=!!(be&&be.define&&be.get&&be.whenDefined),Te=n.create||n,ye=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[oe.call(t,e)]},set:function(r,i){e=oe.call(t,r),e<0?n[t.push(r)-1]=i:n[e]=i}}},we=e.Promise||function(e){function t(e){for(r=!0;n.length;)n.shift()(e)}var n=[],r=!1,i={catch:function(){return i},then:function(e){return n.push(e),r&&setTimeout(t,1),i}};return e(t),i},Me=!1,_e=Te(null),Le=Te(null),Ce=new ye,He=String,Ae=n.create||function e(t){return t?(e.prototype=t,new e):this},xe=pe||(he?function(e,t){return e.__proto__=t,e}:de&&fe?function(){function e(e,t){for(var n,r=de(t),i=0,o=r.length;i<o;i++)n=r[i],ae.call(e,n)||ue(e,n,fe(t,n))}return function(t,n){do e(t,n);while((n=me(n))&&!se.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),Ne=e.MutationObserver||e.WebKitMutationObserver,Oe=(e.HTMLElement||e.Element||e.Node).prototype,Se=!se.call(Oe,ie),Ie=Se?function(e,t,n){return e[t]=n.value,e}:ue,je=Se?function(e){return 1===e.nodeType}:function(e){return se.call(Oe,e)},De=Se&&[],Fe=Oe.dispatchEvent,ke=Oe.getAttribute,Re=Oe.hasAttribute,Pe=Oe.removeAttribute,Be=Oe.setAttribute,Ue=t.createElement,Ve=Ue,qe=Ne&&{attributes:!0,characterData:!0,attributeOldValue:!0},$e=Ne||function(e){Je=!1,ie.removeEventListener(Z,$e)},Ge=0,ze=!1,Je=!0,Ze=!0,We=!0;r in t||(pe||he?(N=function(e,t){se.call(t,e)||p(e,t)},O=p):(N=function(e,t){e[I]||(e[I]=n(!0),p(e,t))},O=N),Se?(Je=!1,function(){var e=fe(Oe,j),t=e.value,n=function(e){var t=new CustomEvent(Z,{bubbles:!0});t.attrName=e,t.prevValue=ke.call(this,e),t.newValue=null,t[J]=t.attrChange=2,Pe.call(this,e),Fe.call(this,t)},r=function(e,t){var n=Re.call(this,e),r=n&&ke.call(this,e),i=new CustomEvent(Z,{bubbles:!0});Be.call(this,e,t),i.attrName=e,i.prevValue=n?r:null,i.newValue=t,n?i[z]=i.attrChange=1:i[G]=i.attrChange=0,Fe.call(this,i)},i=function(e){var t,n=e.currentTarget,r=n[I],i=e.propertyName;r.hasOwnProperty(i)&&(r=r[i],t=new CustomEvent(Z,{bubbles:!0}),t.attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[i]||null,null==t.prevValue?t[G]=t.attrChange=0:t[z]=t.attrChange=1,Fe.call(n,t))};e.value=function(e,o,l){e===Z&&this[P]&&this.setAttribute!==r&&(this[I]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",i)),t.call(this,e,o,l)},ue(Oe,j,e)}()):Ne||(ie[j](Z,$e),ie.setAttribute(I,1),ie.removeAttribute(I),Je&&(C=function(e){var t,n,r,i=this;if(i===e.target){t=i[I],i[I]=n=A(i);for(r in n){if(!(r in t))return H(0,i,r,t[r],n[r],G);if(n[r]!==t[r])return H(1,i,r,t[r],n[r],z)}for(r in t)if(!(r in n))return H(2,i,r,t[r],n[r],J)}},H=function(e,t,n,r,i,o){var l={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:i};l[o]=e,c(l)},A=function(e){for(var t,n,r={},i=e.attributes,o=0,l=i.length;o<l;o++)t=i[o],n=t.name,"setAttribute"!==n&&(r[n]=t.value);return r})),t[r]=function(e,n){if(r=e.toUpperCase(),ze||(ze=!0,Ne?(x=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new Ne(function(r){for(var i,o,l,a=0,s=r.length;a<s;a++)i=r[a],"childList"===i.type?(n(i.addedNodes,e),n(i.removedNodes,t)):(o=i.target,We&&o[P]&&"style"!==i.attributeName&&(l=ke.call(o,i.attributeName),l!==i.oldValue&&o[P](i.attributeName,i.oldValue,l)))})}(a(D),a(k)),x.observe(t,{childList:!0,subtree:!0})):(L=[],t[j]("DOMNodeInserted",f(D)),t[j]("DOMNodeRemoved",f(k))),t[j](W,d),t[j]("readystatechange",d),[Oe,DocumentFragment.prototype].forEach(function(e){var t=e.cloneNode;e.cloneNode=function(e){var n,r=t.call(this,!!e);return 11!==r.nodeType&&(n=s(r),-1<n&&O(r,ne[n])),e&&l(r.querySelectorAll(re)),r}})),-2<oe.call(te,Q+r)+oe.call(te,K+r)&&v(e),!Y.test(r)||-1<oe.call(ee,r))throw new Error("The type "+e+" is invalid");var r,i,u=function(){return m?t.createElement(p,r):t.createElement(p)},c=n||le,m=ae.call(c,R),p=m?n[R].toUpperCase():r;return m&&-1<oe.call(te,K+p)&&v(p),i=te.push((m?Q:K)+r)-1,re=re.concat(re.length?",":"",m?p+'[is="'+e.toLowerCase()+'"]':p),u.prototype=ne[i]=ae.call(c,"prototype")?c.prototype:Ae(Oe),o(t.querySelectorAll(re),D),u},t.createElement=Ve=function(e,n){var r=y(n),i=r?Ue.call(t,e,He(r)):Ue.call(t,e),o=""+e,l=oe.call(te,(r?Q:K)+(r||o).toUpperCase()),a=-1<l;return r&&(i.setAttribute("is",r=r.toLowerCase()),a&&(a=u(o.toUpperCase(),r))),We=!t.createElement.innerHTMLHelper,a&&O(i,ne[l]),i}),b.prototype={constructor:b,define:Ee?function(e,t,n){n?E(e,t,n):(be.define(e,t),e=e.toUpperCase(),_e[e]={constructor:t,create:[e]},Ce.set(t,e))}:E,get:Ee?function(e){return be.get(e)||T(e)}:T,whenDefined:Ee?function(e){return we.race([be.whenDefined(e),M(e)])}:M},be||_();try{!function(e,n,r){if(n[R]="a",e.prototype=HTMLAnchorElement.prototype,be.define(r,e,n),t.createElement(r).getAttribute("is")!==r)throw n}(function e(){return Reflect.construct(HTMLAnchorElement,[],e)},{},"document-register-element-a")}catch(e){_()}try{Ue.call(t,"a","a")}catch(e){He=function(e){return{is:e}}}}(window,document,Object,"registerElement"),function(e){if(!("content"in e.createElement("template"))){var t=e.createElement("style");t.type="text/css",t.textContent="template { display: none !important; }",e.getElementsByTagName("head")[0].appendChild(t),Object.defineProperty(HTMLElement.prototype,"content",{configurable:!0,enumerable:!0,get:function(){if(this.__contentische__)return this.__contentische__;if("TEMPLATE"==this.tagName){for(var t,n=this.__contentische__=e.createDocumentFragment();t=this.firstChild;)n.appendChild(t);return n}}})}}(document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("cellx")):"function"==typeof define&&define.amd?define(["cellx"],t):e.Rionite=e.rionite=t(e.cellx)}(this,function(e){"use strict";function t(e){return P.test(e)?e.replace(P,function(e){return B[e]}):e}function n(e){return U.test(e)?e.replace(U,function(e){return V[e]}):e}function r(e){return"[object RegExp]"==G.call(e)}function i(e){return W[e]||(W[e]=e.replace(Z,function(e,t){return t.toUpperCase()}))}function o(e){return Y[e]||(Y[e]=e.replace(X,function(e,t,n){return"-"+t.toLowerCase()+n}).replace(K,function(e,t){return"-"+t.toLowerCase()}).replace(Q,""))}function l(){var t=oe;oe=null;for(var n=0,r=t.length;n<r;n++){var i=t[n];try{i.callback.call(i.context)}catch(t){e.ErrorLogger.log(t)}}}function a(e,t){oe?oe.push({callback:e,context:t}):(oe=[{callback:e,context:t}],setTimeout(l,1))}function s(e){var t=e.elementIs;if(!t)throw new TypeError('Static property "elementIs" is required');var n=void 0;ce.forEach(function(t){$.call(e,t)||Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n||(n=Object.getPrototypeOf(e.prototype).constructor),t))});var r=e.elementExtends,i=r?ie[r]||window["HTML"+(r.charAt(0).toUpperCase()+r.slice(1))+"Element"]:HTMLElement,l=function(e){return i.call(this,e),e},a=l.prototype=Object.create(i.prototype);return Object.defineProperty(l,"observedAttributes",{configurable:!0,enumerable:!0,get:function(){var t=e.elementAttributes;return t?Object.keys(t).map(function(e){return o(e)}):[]}}),ue(a,se),Object.defineProperty(a,"constructor",{configurable:!0,writable:!0,value:l}),a._rioniteComponentConstructor=e,ie[t]=customElements.define(t,l,r?{extends:r}:null),e}function u(e){function t(t){if(t&&t!=T)throw{name:"SyntaxError",message:'Expected "'+t+'" instead of "'+T+'"',at:E,content:e};return E++,T=e.charAt(E)}function n(e){if(e.length){var t=y.length;t&&y[t-1].type==fe.TEXT?y[t-1].value=y[t-1].raw+=e:y.push({type:fe.TEXT,at:E,raw:e,value:e})}}function r(){var n=E;t("{"),g();var r=i();if(r){g();for(var l,a=[];"|"==T&&(l=o());)a.push(l),g();if("}"==T)return t(),{type:fe.BINDING,at:n,raw:e.slice(n,E),keypath:r,formatters:a}}return E=n,T=e.charAt(E),null}function i(){he.lastIndex=E;var t=he.exec(e)[0];if(t){var n=E;return E+=t.length,T=e.charAt(E),{type:fe.BINDING_KEYPATH,at:n,raw:e.slice(n,E),value:t}}return null}function o(){var n=E;t("|"),g(),pe.lastIndex=E;var r=pe.exec(e)[0];if(r){E+=r.length,T=e.charAt(E);var i="("==T?l():null;return{type:fe.BINDING_FORMATTER,at:n,raw:e.slice(n,E),name:r,arguments:i}}return E=n,T=e.charAt(E),null}function l(){var n=E;t("("),g();var r=[];if(")"!=T)for(;;){var i=a();if(i!==Ee&&(g(),","==T||")"==T)){if(r.push(i),","==T){t(),g();continue}break}return E=n,T=e.charAt(E),null}return t(),{type:fe.BINDING_FORMATTER_ARGUMENTS,at:n,raw:e.slice(n,E),value:r}}function a(){var e=s();return e===Ee?v():e}function s(){switch(T){case"{":return u();case"[":return f();case"'":case'"':return p()}for(var e=[d,m,h],t=0,n=e.length;t<n;t++){var r=e[t]();if(r!==Ee)return r}return Ee}function u(){var n=E;for(t("{"),g();"}"!=T;){if(("'"==T||'"'==T?p()!==Ee:null!==c())&&(g(),":"==T&&(t(),g(),a()!==Ee))){if(g(),","==T){t(),g();continue}if("}"==T)break}return E=n,T=e.charAt(E),Ee}return t(),e.slice(n,E)}function c(){pe.lastIndex=E;var t=pe.exec(e)[0];return""!=t?(E+=t.length,T=e.charAt(E),t):null}function f(){var n=E;for(t("["),g();"]"!=T;){if(","==T)t();else if(a()===Ee)return E=n,T=e.charAt(E),Ee;g()}return t(),e.slice(n,E)}function d(){ve.lastIndex=E;var t=ve.exec(e)[0];return""!=t?(E+=t.length,T=e.charAt(E),t):Ee}function m(){ge.lastIndex=E;var t=ge.exec(e)[0];return""!=t?(E+=t.length,T=e.charAt(E),t):Ee}function p(){if("'"!=T&&'"'!=T)throw{name:"SyntaxError",message:'Expected "\'" or \'"\' instead of "'+T+'"',at:E,content:e};for(var n=E,r=T,i="";t();){if(T==r)return t(),i;if("\\"==T)i+=T+(t()||"");else{if("\r"==T||"\n"==T)return E=n,T=e.charAt(E),Ee;i+=T}}}function h(){be.lastIndex=E;var t=be.exec(e)[0];return""!=t?(E+=t.length,T=e.charAt(E),"null"==t?null:void 0):Ee}function v(){var n=E;if("this"!=e.slice(E,E+4))return Ee;for(E+=4,T=e.charAt(E);;)if("."==T){t(),pe.lastIndex=E;var r=pe.exec(e)[0];if(!r)break;E+=r.length,T=e.charAt(E)}else{if("["!=T)return e.slice(n,E);if(t(),("'"==T||'"'==T?p()===Ee:m()===Ee&&v()===Ee)||"]"!=T)break;t()}return E=n,T=e.charAt(E),Ee}function g(){for(;T&&T<=" ";)t()}for(var b,E=0,T=void 0,y=[];(b=e.indexOf("{",E))>-1;){n(e.slice(E,b)),E=b,T=e.charAt(E);var w=r();w?y.push(w):(n(T),t("{"))}return n(e.slice(E)),y}function c(e,t){var n=t.arguments;return"(this['"+t.name+"'] || formatters['"+t.name+"']).call(this, "+e+(n&&n.value.length?", "+n.raw.slice(1,-1):"")+")"}function f(e){var t=e.raw;if(Te[t])return Te[t];var n=e.keypath.value.split("?"),r=e.formatters,i=n.length;if(1==i)return r.length?Te[t]={value:r.reduce(c,"this."+n[0]),usesFormatters:!0,usesTempVariable:!1}:Te[t]={value:"this."+n[0],usesFormatters:!1,usesTempVariable:!1};for(var o=i-2,l=Array(o);o;)l[--o]=" && (temp = temp"+n[o+1]+")";return r.length?Te[t]={value:"(temp = this."+n[0]+")"+l.join("")+" && "+r.reduce(c,"temp"+n[i-1]),usesFormatters:!0,usesTempVariable:!0}:Te[t]={value:"(temp = this."+n[0]+")"+l.join("")+" && temp"+n[i-1],usesFormatters:!1,usesTempVariable:!0}}function d(e){var t=m.localeSettings=e.localeSettings;_e=e.texts,Le=Function("n","return "+t.plural+";")}function m(e,t,n,r){var i=void 0;$.call(_e,e)&&$.call(_e[e],t)?(i=_e[e][t],n&&(i=i[Le(r[0])])):i=t;var o=Object.create(null);r.forEach(function(e,t){o[t+1]=e}),n&&(o.n=r[0]);var l=[];i=i.split(Me);for(var a=0,s=i.length;a<s;)a%3?(l.push(i[a+1]?i[a+1].split("|")[Le(o[i[a]])]:o[i[a]]),a+=2):(l.push(i[a]),a++);return l.join("")}function p(e){return m("",e,!1,ye.call(arguments,1))}function h(e,t){return m(t,e,!1,ye.call(arguments,1))}function v(e){return m("",e,!0,ye.call(arguments,1))}function g(e,t){return m(t,e,!0,ye.call(arguments,1))}function b(e){var t=e.raw;if(He[t])return He[t];var n=f(e),r=(n.usesTempVariable?"var temp; ":"")+"return "+n.value+";";if(n.usesFormatters){var i=function(){var e=Function("formatters",r);return{v:He[t]=function(){return e.call(this,Ce)}}}();if("object"===("undefined"==typeof i?"undefined":D(i)))return i.v}return He[t]=Function(r)}function E(e){return Ae.test(e)?e.replace(Ae,function(e){return xe[e]}):e}function T(e,t){if(Ne[t])return Ne[t];if(1==e.length){var n=e[0];if(n.type==fe.BINDING)return Ne[t]=b(n)}for(var r=!1,i=!1,o=[],l=0,a=e.length;l<a;l++){var s=e[l];if(s.type==fe.TEXT)o.push("'"+E(s.value)+"'");else{var u=f(s);!r&&u.usesFormatters&&(r=!0),!i&&u.usesTempVariable&&(i=!0),o.push(u.value)}}if(o=(i?"var temp; ":"")+"return ["+o.join(", ")+"].join('');",r){var c=function(){var e=Function("formatters",o);return{v:Ne[t]=function(){return e.call(this,Ce)}}}();if("object"===("undefined"==typeof c?"undefined":D(c)))return c.v}return Ne[t]=Function(o)}function y(e,t,n){n===!1||null==n?e.removeAttribute(t):e.setAttribute(t,n===!0?"":n)}function w(t,n,r){function i(t){for(var a=function(t){switch(t.nodeType){case 1:for(var a=t.attributes,s=a.length;s;){var c=a.item(--s),f=c.value;if(Oe.test(f)){var d=u(f);(d.length>1||d[0].type==fe.BINDING)&&!function(){var n=c.name,i=new e.Cell(T(d,f),{owner:r,onChange:function(e){y(t,n,e.value)}});y(t,n,i.get()),(o||(o=[])).push(i)}()}}var m=t.$c;m&&(m.ownerComponent=n,m.props.context=r,(l||(l=[])).push(m)),!t.firstChild||m&&null!=m.constructor.template||i(t);break;case 3:var p=t.textContent;if(Oe.test(p)){var h=u(p);if(h.length>1||h[0].type==fe.BINDING){var v=new e.Cell(T(h,p),{owner:r,onChange:function(e){t.textContent=e.value}});t.textContent=v.get(),(o||(o=[])).push(v)}}}},s=t.firstChild;s;s=s.nextSibling)a(s)}r||(r=n);var o=null,l=null;return i(t),{bindings:o,childComponents:l}}function M(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];r.isElementAttached||(r.isElementAttached=!0,r._attachElement())}}function _(e,t){var n=e.assets,r=function(r){$.call(t,r)&&":"!=r.charAt(0)&&!function(){var i=void 0;Object.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return i||(i=e.$(t[r].selector||"&__"+o(r)))}})}()};for(var i in t)r(i)}function L(e,t){var n=e.assets;for(var r in t)if($.call(t,r)){var i=void 0;if(":component"==r)i=e;else if(":element"==r)i=e.element;else if(i=n[r],!i)continue;var o=t[r];for(var l in o)$.call(o,l)&&l.length>3&&"on-"==l.slice(0,3)&&e.listenTo(i,l.slice(3),o[l])}}function C(e){var t=void 0,n=void 0,r=[];for(e instanceof Event?(t=e.target,n="rt-"+e.type):(t=e.target.element,n="rt-component-"+e.type);1==t.nodeType&&t.hasAttribute(n)&&r.unshift(t),t=t.parentNode,t;){var i=t.$c;if(i)for(var o=r.length;o;){var l=r[--o],a=i[l.getAttribute(n)];if("function"==typeof a&&(a.call(i,e,l.$c||l)===!1&&(e.isPropagationStopped=!0),e.isPropagationStopped))return}}}function H(){}function A(){}function x(){}function N(){}function O(){}function S(){}function I(){}function j(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];this.parent=n;var r={js:[]},i=[r],o=this._blocks=Object.create(n?n._blocks:null);e=e.split(Ve);for(var l=0,a=e.length;l<a;)if(l%6){var s=e[l];if(s)r.js.push("this."+s+".call(this, data)"),r=o[s]={name:s,js:[]},i.push(r);else if(e[l+1])i.length>1&&(i.pop(),r=i[i.length-1]);else if(e[l+2])n&&i.length>1&&n._blocks[r.name]&&r.js.push("_super.call(this, data)");else{var u=e[l+2];r.js.push(u?"escape(data."+u+")":"data."+e[l+3])}l+=5}else{var c=e[l];c&&r.js.push("'"+E(c)+"'"),l++}Object.keys(o).forEach(function(e){var r=n&&n._blocks[e],i=Function("_super","data","escape","return ["+o[e].js.join(", ")+"].join('');");o[e]=function(e){return i.call(this,r,e,t)}}),this._renderer=n?n._renderer:Function("data","escape","return ["+i[0].js.join(", ")+"].join('');")}var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},F=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},k=e.Utils.nextUID,R=e.EventEmitter.extend({constructor:function(){this._disposables={}},listenTo:function(e,t,n,r){var i=this,o=void 0;if(Array.isArray(e)||e instanceof NodeList||e instanceof HTMLCollection||e.addClass&&e.each){"object"!=("undefined"==typeof t?"undefined":D(t))||Array.isArray(t)?arguments.length<4&&(r=this):arguments.length<3&&(n=this),o=[];for(var l=0,a=e.length;l<a;l++)o.push(this.listenTo(e[l],t,n,r))}else if("object"==("undefined"==typeof t?"undefined":D(t)))if(o=[],Array.isArray(t)){arguments.length<4&&(r=this);for(var s=t,u=0,c=s.length;u<c;u++)o.push(this.listenTo(e,s[u],n,r))}else{r=arguments.length<3?this:n;var f=t;for(var d in f)o.push(this.listenTo(e,d,f[d],r))}else{if(arguments.length<4&&(r=this),"object"!=("undefined"==typeof n?"undefined":D(n)))return this._listenTo(e,t,n,r);var m=n;if(o=[],Array.isArray(m))for(var p=0,h=m.length;p<h;p++)o.push(this.listenTo(e,t,m[p],r));else for(var v in m)o.push(this.listenTo(e[v]("unwrap",0),t,m[v],r))}var g=k(),b=function(){for(var e=o.length;e;)o[--e].stop();delete i._disposables[g]},E=this._disposables[g]={stop:b,dispose:b};return E},_listenTo:function(t,n,r,i){var o=this;if(t instanceof e.EventEmitter)t.on(n,r,i);else{if(!t.addEventListener)throw new TypeError("Unable to add a listener");t!==i&&(r=r.bind(i)),t.addEventListener(n,r)}var l=k(),a=function(){o._disposables[l]&&(t instanceof e.EventEmitter?t.off(n,r,i):t.removeEventListener(n,r),delete o._disposables[l])},s=this._disposables[l]={stop:a,dispose:a};return s},setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this,r=k(),i=setTimeout(function(){delete n._disposables[r],e.call(n)},t),o=function(){n._disposables[r]&&(clearTimeout(i),delete n._disposables[r])},l=this._disposables[r]={clear:o,dispose:o};return l}),setInterval:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this,r=k(),i=setInterval(function(){e.call(n)},t),o=function(){n._disposables[r]&&(clearInterval(i),delete n._disposables[r])},l=this._disposables[r]={clear:o,dispose:o};return l}),registerCallback:function(e){function t(){if(i._disposables[r])return delete i._disposables[r],e.apply(i,arguments)}var n=this,r=k(),i=this,o=function(){delete n._disposables[r]};return t.cancel=o,t.dispose=o,this._disposables[r]=t,t},dispose:function(){var e=this._disposables;for(var t in e)e[t].dispose();return this}}),P=/[&<>"]/g,B=Object.create(null);B["&"]="&amp;",B["<"]="&lt;",B[">"]="&gt;",B['"']="&quot;";var U=/&(?:amp|lt|gt|quot);/g,V=Object.create(null);V["&amp;"]="&",V["&lt;"]="<",V["&gt;"]=">",V["&quot;"]='"';var q,$=Object.prototype.hasOwnProperty,G=Object.prototype.toString,z=e.JS.Map,J=new z([[Boolean,[function(e){return null!==e&&"no"!=e},function(e){return e?"":null}]],["boolean",[function(e,t){return null!==e?"no"!=e:t},function(e,t){return e?"":t?"no":null}]],[Number,[function(e){return null!==e?+e:void 0},function(e){return void 0!==e?String(+e):null}]],["number",[function(e,t){return null!==e?+e:t},function(e){return void 0!==e?String(+e):null}]],[String,[function(e){return null!==e?e:void 0},function(e){return void 0!==e?String(e):null}]],["string",[function(e,t){return null!==e?e:t},function(e){return void 0!==e?String(e):null}]],[Object,[function(e){return null!==e?Object(Function("return "+n(e)+";")()):void 0},function(e){return null!=e?t(r(e)?e.toString():JSON.stringify(e)):null}]],["object",[function(e,t){return null!==e?Object(Function("return "+n(e)+";")()):t},function(e){return null!=e?t(r(e)?e.toString():JSON.stringify(e)):null}]]]),Z=/[-_]+([a-z]|$)/g,W=Object.create(null),X=/-?([A-Z])([^A-Z])/g,K=/-?([A-Z]+)/g,Q=/^-/,Y=Object.create(null),ee=e.JS.Map,te=new ee([["boolean","boolean"],[Boolean,"boolean"],["number","number"],[Number,"number"],["string","string"],[String,"string"]]),ne=e.EventEmitter.extend({constructor:function(t){var n=this,r=t.$c,l=r.constructor.elementAttributes,a=function(a){var s=l[a],u="undefined"==typeof s?"undefined":D(s),c=void 0,f=void 0,d=void 0;if("function"==u)u=s,f=d=!1;else if("object"!=u||void 0===s.type&&void 0===s.defaultValue)c=s,f=d=!1;else{if(u=s.type,c=s.default,void 0===u)u="undefined"==typeof c?"undefined":D(c);else if(void 0!==c&&(te.get(u)||"")!=("undefined"==typeof c?"undefined":D(c)))throw new TypeError("Specified type does not match type of defaultValue");f=s.required,d=s.readonly}var m=J.get(u);if(!m)throw new TypeError("Unsupported attribute type");var p=i(a),h=o(a);if(f&&!t.hasAttribute(h))throw new TypeError('Property "'+a+'" is required');var v=n["_"+p]=n["_"+h]=new e.Cell(t.getAttribute(h),{validate:d?function(e,t){if(t)throw new TypeError('Property "'+a+'" is readonly')}:null,merge:function(e,t){return t&&e===t[0]?t:[e,m[0](e,c)]},onChange:function(e){r.isReady&&r.elementAttributeChanged(h,e.oldValue[1],e.value[1])}}),g={configurable:!0,enumerable:!0,get:function(){return v.get()[1]},set:d?function(e){if(e!==v.get()[1])throw new TypeError('Property "'+a+'" is readonly')}:function(e){e=m[1](e,c),null===e?t.removeAttribute(h):t.setAttribute(h,e),v.set(e)}};Object.defineProperty(n,p,g),h!=p&&Object.defineProperty(n,h,g)};for(var s in l)a(s)}}),re=e.Utils.mixin,ie=re(Object.create(null),{a:window.HTMLAnchorElement,blockquote:window.HTMLQuoteElement,br:window.HTMLBRElement,caption:window.HTMLTableCaptionElement,col:window.HTMLTableColElement,colgroup:window.HTMLTableColElement,datalist:window.HTMLDataListElement,del:window.HTMLModElement,dir:window.HTMLDirectoryElement,dl:window.HTMLDListElement,document:window.HTMLDocument,element:Element,fieldset:window.HTMLFieldSetElement,frameset:window.HTMLFrameSetElement,h1:window.HTMLHeadingElement,h2:window.HTMLHeadingElement,h3:window.HTMLHeadingElement,h4:window.HTMLHeadingElement,h5:window.HTMLHeadingElement,h6:window.HTMLHeadingElement,hr:window.HTMLHRElement,iframe:window.HTMLIFrameElement,img:window.HTMLImageElement,ins:window.HTMLModElement,li:window.HTMLLIElement,menuitem:window.HTMLMenuItemElement,ol:window.HTMLOListElement,optgroup:window.HTMLOptGroupElement,p:window.HTMLParagraphElement,q:window.HTMLQuoteElement,tbody:window.HTMLTableSectionElement,td:window.HTMLTableCellElement,template:window.HTMLTemplateElement||HTMLElement,textarea:window.HTMLTextAreaElement,tfoot:window.HTMLTableSectionElement,th:window.HTMLTableCellElement,thead:window.HTMLTableSectionElement,tr:window.HTMLTableRowElement,ul:window.HTMLUListElement,vhgroupv:window.HTMLUnknownElement,vkeygen:window.HTMLUnknownElement}),oe=void 0,le=e.JS.Symbol,ae=le("attached"),se=(q={rioniteComponent:null,get $c(){return new this._rioniteComponentConstructor(this)}},F(q,ae,!1),F(q,"connectedCallback",function(){this[ae]=!0;var e=this.rioniteComponent;e?e.isElementAttached?null===e._parentComponent&&(e._parentComponent=void 0,e.elementMoved()):(e._parentComponent=void 0,e.isElementAttached=!0,e._attachElement()):a(function(){if(this[ae]){var e=this.$c;e._parentComponent=void 0,e.parentComponent||(e.isElementAttached=!0,e._attachElement())}},this)}),F(q,"disconnectedCallback",function(){this[ae]=!1;var e=this.rioniteComponent;e&&e.isElementAttached&&(e._parentComponent=null,a(function(){null===e._parentComponent&&e.isElementAttached&&(e.isElementAttached=!1,e._detachElement())}))}),F(q,"attributeChangedCallback",function(e,t,n){var r=this.rioniteComponent;if(r&&r.isReady){var i=r.elementAttributes,o="_"+e;$.call(i,o)&&i[o].set(n)}}),q),ue=e.Utils.mixin,ce=["elementExtends","elementAttributes","props","i18n","template","assets"],fe={TEXT:0,BINDING:1,BINDING_KEYPATH:2,BINDING_FORMATTER:3,BINDING_FORMATTER_ARGUMENTS:4},de="[$_a-zA-Z][$\\w]*",me="(?:"+de+"|\\[\\d+\\])(?:\\??(?:\\."+de+"|\\[\\d+\\]))*",pe=RegExp(de+"|","g"),he=RegExp(me+"|","g"),ve=/false|true|/g,ge=/(?:[+-]\s*)?(?:0b[01]+|0[0-7]+|0x[0-9a-fA-F]+|(?:(?:0|[1-9]\d*)(?:\.\d+)?|\.\d+)(?:[eE][+-]?\d+)?|Infinity|NaN)|/g,be=/null|undefined|void 0|/g,Ee={},Te=Object.create(null),ye=Array.prototype.slice,we=Array.prototype.map,Me=/\{([1-9]\d*|n)(?::((?:[^|]*\|)+?[^}]*))?\}/,_e=void 0,Le=void 0;m.configure=d,m.t=p,m.pt=h,m.nt=v,m.npt=g,d({localeSettings:{code:"ru",plural:"(n%100) >= 5 && (n%100) <= 20 ? 2 : (n%10) == 1 ? 0 : (n%10) >= 2 && (n%10) <= 4 ? 1 : 2"},texts:{}});var Ce=Object.create(null);Ce.t=m.t,Ce.pt=m.pt,Ce.nt=m.nt,Ce.npt=m.npt;var He=Object.create(null),Ae=/[\\'\r\n]/g,xe=Object.create(null);xe["\\"]="\\\\",xe["'"]="\\'",xe["\r"]="\\r",xe["\n"]="\\n";var Ne=Object.create(null),Oe=/{[^}]+}/,Se=["click","dblclick","mousedown","mouseup","input","change","submit","focusin","focusout"],Ie=document.createRange(),je=void 0;Ie.createContextualFragment?!function(){var e=!1;je=function(t){return e||(Ie.selectNode(document.body),e=!0),Ie.createContextualFragment(t)}}():je=function(e){var t=document.createElement("div"),n=document.createDocumentFragment();t.innerHTML=e;for(var r;r=t.firstChild;)n.appendChild(r);return n};var De=je,Fe=e.JS.Symbol,ke=e.Utils.createClass,Re=Fe("rawContent"),Pe=Fe("blockNameInMarkup"),Be=e.EventEmitter.extend({Implements:[R],Static:{extend:function(e,t){
t.Extends=this;var n=t.Static||(t.Static={});n.elementIs=e;var r=n.props;if(r){if(r.content||r.context)throw new TypeError('It is not necessary to declare property "'+(r.content?"content":"context")+'"');n.elementAttributes=r}else n.elementAttributes&&(n.props=n.elementAttributes);return s(ke(t))},elementIs:void 0,elementExtends:void 0,elementAttributes:null,props:null,i18n:null,template:null,assets:null},ownerComponent:null,_parentComponent:null,get parentComponent(){if(void 0!==this._parentComponent)return this._parentComponent;for(var e;e=(e||this.element).parentNode;)if(e.$c)return this._parentComponent=e.$c;return this._parentComponent=null},element:null,get elementAttributes(){var e=new ne(this.element);return Object.defineProperty(this,"elementAttributes",{configurable:!0,enumerable:!0,writable:!0,value:e}),e},get props(){var e=Object.create(this.elementAttributes);return e.content=null,e.context=null,Object.defineProperty(this,"props",{configurable:!0,enumerable:!0,writable:!0,value:e}),e},_bindings:null,assets:null,isElementAttached:!1,initialized:!1,isReady:!1,constructor:function(t,n){if(e.EventEmitter.call(this),R.call(this),null==t)t=document.createElement(this.constructor.elementIs);else if("string"==typeof t){var r=this.constructor.elementIs,o=t;t=document.createElement(r),t.innerHTML=o;var l=t.firstChild;l==t.lastChild&&1==l.nodeType&&l.tagName.toLowerCase()==r&&(t=l)}if(this.element=t,t.rioniteComponent=this,Object.defineProperty(t,"$c",{value:this}),n){var a=this.props;for(var s in n)a[i(s)]=n[s]}this.created()},_handleEvent:function(t){if(e.EventEmitter.prototype._handleEvent.call(this,t),t.bubbles!==!1&&!t.isPropagationStopped){var n=this.parentComponent;n?n._handleEvent(t):C(t)}},_attachElement:function(){this.initialized||(this.initialize(),this.initialized=!0);var e=this.constructor,t=e[Re],n=this.element;if(this.isReady){if(t)for(var r;r=n.firstChild;)n.removeChild(r)}else{for(var o=e;n.classList.add(o.elementIs),o=Object.getPrototypeOf(o.prototype).constructor,o!=Be;);var l=this.elementAttributes,a=e.elementAttributes;for(var s in a)if("function"!=typeof a[s]){var u=i(s);l[u]=l[u]}if(null!=e.template){if(!t){var c=e.template;t=e[Re]=De("string"==typeof c?c:c.render(e))}for(var f,d=this.props.content=document.createDocumentFragment();f=n.firstChild;)d.appendChild(f)}}if(t){var m=t.cloneNode(!0),p=w(m,this),h=p.bindings,v=p.childComponents;this._bindings=h,this.element.appendChild(m),v&&M(v),this._initAssets()}this.isReady||(t||this._initAssets(),this.ready(),this.isReady=!0),this.elementAttached()},_detachElement:function(){this.dispose(),this.elementDetached()},_initAssets:function(){this.assets=Object.create(null);var e=this.constructor.assets;e&&(_(this,e),L(this,e))},dispose:function(){this._destroyBindings(),R.prototype.dispose.call(this)},_destroyBindings:function(){var e=this._bindings;if(e){for(var t=e.length;t;)e[--t].off();this._bindings=null}},created:H,initialize:A,ready:x,elementAttached:N,elementDetached:O,elementMoved:S,elementAttributeChanged:I,$:function(e){var t=this.element.querySelector(this._prepareSelector(e));return t&&(t.$c||t)},$$:function(e){return we.call(this.element.querySelectorAll(this._prepareSelector(e)),function(e){return e.$c||e})},_prepareSelector:function(e){if(e=e.split("&"),1==e.length)return e[0];var t=this.constructor,n=t[Pe];if(!n){var r=t;do r.template&&(n=r.elementIs),r=Object.getPrototypeOf(r.prototype).constructor;while(r!=Be);n||(n=t.elementIs),t[Pe]=n}return e.join("."+n)}});document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),Se.forEach(function(e){document.addEventListener(e,C)})});var Ue="(?:"+de+"|\\[\\d+\\])(?:(?:\\."+de+"|\\[\\d+\\]))*",Ve=RegExp("{{(?:\\s*(?:"+("block\\s+("+de+")|(\\/)block|(s)uper\\(\\)|("+Ue+")")+(")\\s*|{\\s*("+Ue+")\\s*}")+")}}");j.prototype.extend=function(e){return new j(e,this)},j.prototype.render=function(e){return this._renderer.call(this._blocks,e||{},t)};var qe=document.createElement("div");qe.innerHTML="<template>1</template>";var $e=qe.firstChild,Ge=!$e.firstChild,ze=e.JS.Symbol("templatesFixed"),Je=Be.extend("rt-content",{Static:{elementAttributes:{select:String,getContext:String},template:""},_rawContent:void 0,_attachElement:function(){var e=this.ownerComponent,t=this.element,n=this.props;if(this.isReady)for(var r;r=t.firstChild;)t.removeChild(r);else{for(var i,o=n.content=document.createDocumentFragment();i=t.firstChild;)o.appendChild(i);var l=e.props.content,a=this.elementAttributes.select;if(a){if(!Ge&&!l[ze]){for(var s=l.querySelectorAll("template"),u=s.length;u;)s[--u].content;l[ze]=!0}var c=l.querySelectorAll(a),f=c.length;if(f)for(var d=this._rawContent=document.createDocumentFragment(),m=0;m<f;m++)d.appendChild(c[m].cloneNode(!0));else this._rawContent=o}else this._rawContent=l.firstChild?l:o;this.isReady=!0}var p=this._rawContent.cloneNode(!0),h=n.getContext,v=this._rawContent==n.content?w(p,e,h?e[h](this,n.context):n.context):w(p,e.ownerComponent,h?e[h](this,e.props.context):e.props.context),g=v.bindings,b=v.childComponents;this._bindings=g,t.appendChild(p),b&&M(b)},_detachElement:function(){this._destroyBindings()}}),Ze=e.Utils.nextTick,We=Be.extend("rt-if-then",{Static:{elementExtends:"template",elementAttributes:{if:String}},_if:null,_elseMode:!1,_nodes:null,_attachElement:function(){var t=this;this.initialized||!function(){var n=t.props;n.content=document.importNode(t.element.content,!0);var r=u("{"+n.if+"}");if(r.length>1||r[0].type!=fe.BINDING)throw new SyntaxError('Invalid value of attribute "if"');var i=b(r[0]);t._if=new e.Cell(function(){return!!i.call(this)},{owner:n.context}),t.initialized=!0}(),this._render(!1),this._if.on("change",this._onIfChange,this)},_detachElement:function(){this._destroyBindings(),this._if.off("change",this._onIfChange,this);var e=this._nodes;if(e)for(var t=e.length;t;){var n=e[--t],r=n.parentNode;r&&r.removeChild(n)}},_onIfChange:function(){this._render(!0)},_render:function(e){var t=this;if(this._elseMode?!this._if.get():this._if.get()){var n=this.props.content.cloneNode(!0),r=w(n,this.ownerComponent,this.props.context),i=r.bindings,o=r.childComponents;this._nodes=ye.call(n.childNodes),this._bindings=i,this.element.parentNode.insertBefore(n,this.element.nextSibling),o&&M(o)}else{this._destroyBindings();var l=this._nodes;if(l){for(var a=l.length;a;){var s=l[--a];s.parentNode.removeChild(s)}this._nodes=null}}e&&Ze(function(){t.emit("change")})}}),Xe=We.extend("rt-if-else",{Static:{elementExtends:"template"},_elseMode:!0}),Ke=e.JS.Map,Qe=e.Utils.nextTick,Ye=RegExp("^\\s*("+de+")\\s+of\\s+(\\S.*)$"),et='Invalid value of attribute "for"',tt=Be.extend("rt-repeat",{Static:{elementExtends:"template",elementAttributes:{for:String,trackBy:String,strip:!1}},_itemName:void 0,_list:null,_itemMap:null,_oldItemMap:null,_trackBy:void 0,_rawItemContent:null,_context:null,_lastNode:null,_attachElement:function(){if(!this.initialized){var t=this.props,n=t.for.match(Ye);if(!n)throw new SyntaxError(et);var r=u("{"+n[2]+"}");if(r.length>1||r[0].type!=fe.BINDING)throw new SyntaxError(et);this._itemName=n[1],this._list=new e.Cell(b(r[0]),{owner:t.context}),this._itemMap=new Ke,this._trackBy=t.trackBy;var i=this._rawItemContent=document.importNode(this.element.content,!0);if(t.strip){var o=i.firstChild,l=i.lastChild;o==l?3==o.nodeType&&(o.textContent=o.textContent.trim()):(3==o.nodeType&&((o.textContent=o.textContent.replace(/^\s+/,""))||i.removeChild(o)),3==l.nodeType&&((l.textContent=l.textContent.replace(/\s+$/,""))||i.removeChild(l)))}this._context=t.context,this.initialized=!0}this._render(!1),this._list.on("change",this._onListChange,this)},_detachElement:function(){this._clearWithItemMap(this._itemMap),this._list.off("change",this._onListChange,this)},_onListChange:function(){this._render(!0)},_render:function(e){var t=this,n=this._oldItemMap=this._itemMap;this._itemMap=new Ke;var r=this._list.get(),i=!1;if(r&&(this._lastNode=this.element,i=r.reduce(function(e,n,r){return t._renderListItem(n,r)||e},i)),n.size)this._clearWithItemMap(n);else if(!i)return;e&&Qe(function(){t.emit("change")})},_renderListItem:function(t,n){var r,i=this._trackBy,o=i?"$index"==i?n:t[i]:t,l=this._oldItemMap.get(o),a=this._itemMap.get(o);if(l){var s=void 0;1==l.length?(s=l[0],this._oldItemMap.delete(o)):s=l.shift(),a?a.push(s):this._itemMap.set(o,[s]),s.item.set(t);var u=s.nodes;if(n==s.index.get())return this._lastNode=u[u.length-1],!1;if(s.index.set(n),1==u.length){var c=u[0];this._lastNode.parentNode.insertBefore(c,this._lastNode.nextSibling),this._lastNode=c}else{for(var f=document.createDocumentFragment(),d=0,m=u.length;d<m;d++)f.appendChild(u[d]);var p=f.lastChild;this._lastNode.parentNode.insertBefore(f,this._lastNode.nextSibling),this._lastNode=p}return!0}t=new e.Cell(t),n=new e.Cell(n);var h=this._rawItemContent.cloneNode(!0),v=Object.create(this._context,(r={},F(r,this._itemName,{get:function(){return t.get()}}),F(r,"$index",{get:function(){return n.get()}}),r)),g=w(h,this.ownerComponent,v),b=g.bindings,E=g.childComponents,T={item:t,index:n,nodes:ye.call(h.childNodes),bindings:b};a?a.push(T):this._itemMap.set(o,[T]);var y=h.lastChild;return this._lastNode.parentNode.insertBefore(h,this._lastNode.nextSibling),this._lastNode=y,E&&M(E),!0},_clearWithItemMap:function(e){e.forEach(this._clearWithItems,this),e.clear()},_clearWithItems:function(e){for(var t=e.length;t;){var n=e[--t],r=n.bindings;if(r)for(var i=r.length;i;)r[--i].off();for(var o=n.nodes,l=o.length;l;){var a=o[--l],s=a.parentNode;s&&s.removeChild(a)}}}}),nt={DisposableMixin:R,ElementAttributes:ne,Component:Be,registerComponent:s,formatters:Ce,getText:m,Template:j,template:function(e){return new j(e)},Components:{RtContent:Je,RtIfThen:We,RtIfElse:Xe,RtRepeat:tt},Utils:{camelize:i,hyphenize:o,escapeString:E,escapeHTML:t,unescapeHTML:n,isRegExp:r,defer:a,htmlToFragment:De}};return nt.Rionite=nt,nt});